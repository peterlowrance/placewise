<div mat-dialog-content>

    <!-- Select which type of report -->
    <div *ngIf="step === 'start'">
        <h1 mat-dialog-title>What kind of Report?</h1>
        <button mat-raised-button color="warn" class="big-button report-button" [disabled]="loadingAdmins" (click)="setupAutoReport('low')">
            <mat-icon *ngIf="!loading.low"> report_problem </mat-icon>
            <span *ngIf="!loading.low"> 
                Report Low
            </span>
            <mat-spinner *ngIf="loading.low" [diameter]="24" class="report-spinner" color="white"></mat-spinner>
        </button>
        <br>
        <button mat-raised-button class="big-button report-button empty-button" [disabled]="loadingAdmins" (click)="setupAutoReport('empty')">
            <mat-icon *ngIf="!loading.empty"> report_problem </mat-icon>
            <span *ngIf="!loading.empty"> 
                Report Empty
            </span>
            <mat-spinner *ngIf="loading.empty" [diameter]="24" class="report-spinner" color="white"></mat-spinner>
        </button>
        <br>
        <br>
        <br>
        <button mat-raised-button color="accent" class="big-button report-button" (click)="onNextClick()">
            <mat-spinner *ngIf="loading.custom" [diameter]="24" class="report-spinner" color="white"></mat-spinner>
            <div *ngIf="!loading.custom"> Custom... </div>
        </button>
    </div>

    <!-- Where to report to -->
    <div *ngIf="step === 'where'">
        <h1 mat-dialog-title>Which place are you reporting for?</h1>
        <div *ngFor="let location of data.locations">
            <mat-card class="hierarchyCard" (click)="setLocation(location.ID)" [class.mat-elevation-z2]="true">
                <div class="hierarchycard-content">
                    <div class="hierarchy image" [ngStyle]="{'background-image': 'url(' + location.imageUrl + ')'}"></div>
                    <div class='hierarchy-text'>
                        <div class="hierarchy-title-text-positioner"><div class="hierarchy-title-text"><div>{{location.name}}</div></div></div>
                        <div class="hierarchy-desc-text"><p>{{location.desc ? location.desc : ' '}}</p></div>
                    </div>
                </div>
            </mat-card>
        </div>
        <mat-card class="hierarchyCard" (click)="setLocation('none')" [class.mat-elevation-z2]="true">
            <div class="general-text">
                None: Just do a general report.
            </div>
        </mat-card>
    </div>

    <!-- Who to report to -->
    <div *ngIf="step === 'who'">
        <h1 mat-dialog-title>Who will recieve this report?</h1>
        <app-user-select class="user-select" [selectedUsers]="selectedAdmins" [allUsers]="admins"></app-user-select>
        <div mat-dialog-actions>
            <button mat-raised-button (click)="onCancelClick()">Cancel</button>
            <span class="btn-spacer"></span>
            <button mat-raised-button color="accent" (click)="onNextClick()">Next</button>
        </div>
    </div>

    <!-- Add text, finish -->
    <div *ngIf="step === 'text'">
        <h1 mat-dialog-title>Enter Report Details</h1>
    
        <mat-form-field class="report-text-full-width">
            <textarea matInput class="report-textarea" placeholder="Report Description" [(ngModel)]="description"></textarea>
        </mat-form-field>
    
        <div mat-dialog-actions>
            <button mat-raised-button (click)="onCancelClick()">Cancel</button>
            <span class="btn-spacer"></span>
            <button mat-raised-button color="primary" (click)="onSendClick()">
                <mat-icon> report_problem </mat-icon>
                Send
            </button>
        </div>
    </div>

</div>